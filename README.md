# JM Comic MCP Server (TypeScriptç‰ˆæœ¬)

åŸºäºModel Context Protocolçš„JMæ¼«ç”»æœåŠ¡å™¨TypeScriptå®ç°ï¼Œæä¾›æ¼«ç”»æœç´¢ã€ä¸‹è½½å’ŒPDFè½¬æ¢åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” **æ¼«ç”»æœç´¢**: æ”¯æŒå…³é”®è¯æœç´¢å’Œé«˜çº§ç­›é€‰
- ğŸ“– **ä¸“è¾‘è¯¦æƒ…**: è·å–æ¼«ç”»ä¸“è¾‘çš„è¯¦ç»†ä¿¡æ¯  
- ğŸ“Š **æ’è¡Œæ¦œ**: è·å–å‘¨æ’è¡Œã€æœˆæ’è¡Œå’Œæ€»æ’è¡Œ
- ğŸ·ï¸ **åˆ†ç±»ç­›é€‰**: æŒ‰åˆ†ç±»ã€æ—¶é—´æ®µå’Œæ’åºæ–¹å¼ç­›é€‰æ¼«ç”»
- ğŸ“¥ **æ¼«ç”»ä¸‹è½½**: ä¸‹è½½æ¼«ç”»ä¸“è¾‘åˆ°æœ¬åœ°ï¼Œæ”¯æŒå›¾ç‰‡è§£ç 
- ğŸ“¦ **æ‰¹é‡ä¸‹è½½**: æ”¯æŒåŒæ—¶ä¸‹è½½å¤šä¸ªä¸“è¾‘
- ğŸ“š **PDFè½¬æ¢**: å°†ä¸‹è½½çš„å›¾ç‰‡è½¬æ¢ä¸ºPDFæ ¼å¼
- ğŸ“ **ç›®å½•ç®¡ç†**: è·å–ä¸‹è½½ç›®å½•ä¿¡æ¯å’Œå·²ä¸‹è½½ä¸“è¾‘åˆ—è¡¨
- âš™ï¸ **é…ç½®ç®¡ç†**: æ”¯æŒYAMLé…ç½®æ–‡ä»¶
- ğŸŒ **è·¨å¹³å°æ”¯æŒ**: æ”¯æŒWindowsã€Linuxã€macOSå’ŒAndroid (Termux)

## ç³»ç»Ÿè¦æ±‚

### å¿…éœ€ä¾èµ–
- **Node.js** 16+ 
- **FFmpeg** - ç”¨äºWebPå›¾ç‰‡æ ¼å¼è½¬æ¢



## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. ç¼–è¯‘é¡¹ç›®

```bash
npm run build
```

### 3. éªŒè¯FFmpegå®‰è£…

```bash
ffmpeg -version
```

### 4. æµ‹è¯•æœåŠ¡å™¨

```bash
# ä½¿ç”¨å†…ç½®æµ‹è¯•å®¢æˆ·ç«¯
node test-mcp-client.js
```

### 5. é…ç½®VS Code

åœ¨ `.vscode/mcp.json` ä¸­é…ç½®ï¼š

```json
{
  "servers": {
    "jm-comic-server-ts": {
      "type": "stdio",
      "command": "node",
      "args": ["ä½ çš„é¡¹ç›®è·¯å¾„/build/server/index.js"]
    }
  }
}
```

### 6. é‡å¯VS Code

é…ç½®å®Œæˆåé‡å¯VS Codeï¼Œå³å¯åœ¨AIåŠ©æ‰‹ä¸­ä½¿ç”¨JMæ¼«ç”»åŠŸèƒ½ã€‚

## å¯ç”¨å·¥å…·

| å·¥å…· | æè¿° | å‚æ•° |
|------|------|------|
| `search_comic` | æœç´¢æ¼«ç”» | `query`, `page`, `order_by`, `time_period`, `category` |
| `get_album_details` | è·å–ä¸“è¾‘è¯¦æƒ… | `album_id` |
| `get_album_info_enhanced` | è·å–å¢å¼ºä¸“è¾‘ä¿¡æ¯ | `album_id` |
| `download_comic_album` | ä¸‹è½½æ¼«ç”»ä¸“è¾‘ | `album_id`, `convert_to_pdf` |
| `batch_download_albums` | æ‰¹é‡ä¸‹è½½ä¸“è¾‘ | `album_ids`, `convert_to_pdf` |
| `convert_album_to_pdf_tool` | è½¬æ¢ä¸ºPDF | `album_id`, `album_dir` |
| `get_ranking_list` | è·å–æ’è¡Œæ¦œ | `period` |
| `filter_comics_by_category` | åˆ†ç±»ç­›é€‰ | `category`, `time_period`, `order_by`, `page` |
| `get_download_info` | è·å–ä¸‹è½½ç›®å½•ä¿¡æ¯ | æ— å‚æ•° |


## é¡¹ç›®ç»“æ„

```
jm-mcp-server-ts/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ jmcomic.ts           # æ ¸å¿ƒAPIå®¢æˆ·ç«¯ (ä½¿ç”¨FFmpeg)
â”‚   â”œâ”€â”€ simple-jm-downloader.ts  # ä¸‹è½½å™¨å°è£…
â”‚   â””â”€â”€ types.ts             # ç±»å‹å®šä¹‰
â”œâ”€â”€ server/
â”‚   â””â”€â”€ index.ts             # MCPæœåŠ¡å™¨ä¸»æ–‡ä»¶
â”œâ”€â”€ downloads/               # ä¸‹è½½ç›®å½•
â”œâ”€â”€ test-mcp-client.js       # æµ‹è¯•å®¢æˆ·ç«¯
â”œâ”€â”€ op.yml                   # é…ç½®æ–‡ä»¶
â””â”€â”€ build/                   # ç¼–è¯‘è¾“å‡º
```

## æŠ€æœ¯æ ˆ

- **TypeScript** - ç±»å‹å®‰å…¨çš„JavaScript
- **@modelcontextprotocol/sdk** - MCPå®˜æ–¹SDK
- **axios** - HTTPå®¢æˆ·ç«¯
- **jimp** - å›¾åƒå¤„ç†å’Œè§£ç 
- **ffmpeg** - å›¾ç‰‡æ ¼å¼è½¬æ¢ (WebP â†’ JPG)
- **pdf-lib** - PDFç”Ÿæˆ
- **crypto-js** - åŠ å¯†è§£å¯†

## å¹³å°å…¼å®¹æ€§

| å¹³å° | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| âœ… Windows | å®Œå…¨æ”¯æŒ | éœ€è¦å®‰è£…FFmpeg |
| âœ… macOS | å®Œå…¨æ”¯æŒ | éœ€è¦å®‰è£…FFmpeg |
| âœ… Linux | å®Œå…¨æ”¯æŒ | éœ€è¦å®‰è£…FFmpeg |
| âœ… Android (Termux) | å®Œå…¨æ”¯æŒ | ä½¿ç”¨FFmpegä»£æ›¿webp-converter |

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. WebPè½¬æ¢å¤±è´¥**
```bash
# ç¡®ä¿FFmpegå·²æ­£ç¡®å®‰è£…
ffmpeg -version

# æ£€æŸ¥FFmpegæ˜¯å¦åœ¨PATHä¸­
which ffmpeg  # Linux/macOS
where ffmpeg  # Windows
```

**2. ä¸‹è½½å¤±è´¥**
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç¡®è®¤ä¸“è¾‘IDæ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—äº†è§£è¯¦ç»†é”™è¯¯ä¿¡æ¯

**3. æƒé™é”™è¯¯**
- ç¡®ä¿æœ‰å†™å…¥downloadsç›®å½•çš„æƒé™
- åœ¨Linux/macOSä¸Šå¯èƒ½éœ€è¦è°ƒæ•´ç›®å½•æƒé™

## æ›´æ–°æ—¥å¿—

### v1.1.0 (æœ€æ–°)
- âœ… æ›¿æ¢webp-converterä¸ºFFmpegï¼Œè§£å†³Android ARM64å…¼å®¹æ€§
- âœ… æ–°å¢æ‰¹é‡ä¸‹è½½åŠŸèƒ½
- âœ… æ–°å¢ä¸‹è½½ç›®å½•ç®¡ç†
- âœ… æ”¹è¿›é”™è¯¯å¤„ç†å’Œæ—¥å¿—è¾“å‡º
- âœ… å¢åŠ è·¨å¹³å°æ”¯æŒ

### v1.0.0
- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… åŸºç¡€æœç´¢å’Œä¸‹è½½åŠŸèƒ½
- âœ… PDFè½¬æ¢åŠŸèƒ½

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚

## æ”¯æŒ

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªâ­ï¸ï¼
