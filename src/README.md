# JMComicä¸‹è½½å™¨ TypeScriptç‰ˆæœ¬

è¿™æ˜¯Pythonç‰ˆæœ¬ `simple_jm_downloader.py` çš„å®Œå…¨å¯¹åº”çš„TypeScriptå®ç°ã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ… å®Œå…¨æŒ‰ç…§Pythonç‰ˆæœ¬é€»è¾‘å¤åˆ»  
- ğŸ“ è‡ªåŠ¨åˆ›å»ºä¸‹è½½ç›®å½•
- ğŸ“– è·å–æœ¬å­è¯¦ç»†ä¿¡æ¯
- ğŸ“¥ å•ä¸ª/æ‰¹é‡ä¸‹è½½åŠŸèƒ½
- ğŸš« ä¸‹è½½æ— éœ€ç¡®è®¤ï¼ˆé»˜è®¤ï¼‰
- ğŸ“Š ä¸‹è½½ç»“æœç»Ÿè®¡
- ğŸ¯ **å®Œç¾çš„å›¾ç‰‡è§£ç åŠŸèƒ½**

## å½“å‰çŠ¶æ€

âœ… **æ‰€æœ‰åŠŸèƒ½å®Œæˆ**ï¼š
- çœŸå®APIè°ƒç”¨
- æ­£ç¡®çš„å›¾ç‰‡URLæ„å»º  
- ä¸‹è½½çœŸå®å›¾ç‰‡æ–‡ä»¶
- **å®Œç¾çš„å›¾ç‰‡è§£ç ** - ä¸Pythonç‰ˆæœ¬100%ä¸€è‡´
- é»˜è®¤ä¸‹è½½ä¸éœ€è¦ç¡®è®¤

## å®‰è£…ä¾èµ–

```bash
npm install @types/node typescript ts-node axios crypto-js sharp
```

## ä½¿ç”¨æ–¹æ³•

### å‘½ä»¤è¡Œä½¿ç”¨

```bash
# å•ä¸ªä¸‹è½½ï¼ˆé»˜è®¤ä¸éœ€è¦ç¡®è®¤ï¼‰
npx ts-node simple-jm-downloader.ts 302471

# æ‰¹é‡ä¸‹è½½
npx ts-node simple-jm-downloader.ts 302471 123456 789012
```

### ç¼–ç¨‹ä½¿ç”¨

```typescript
import { SimpleJMDownloader } from './simple-jm-downloader';

// åˆ›å»ºä¸‹è½½å™¨å®ä¾‹
const downloader = new SimpleJMDownloader("my_downloads");

// è·å–æœ¬å­ä¿¡æ¯
const info = await downloader.getAlbumInfo("302471");
console.log(info);

// ä¸‹è½½å•ä¸ªæœ¬å­ï¼ˆé»˜è®¤ä¸éœ€è¦ç¡®è®¤ï¼‰
const result = await downloader.downloadAlbum("302471", false);
console.log(result);

// æ‰¹é‡ä¸‹è½½
const results = await downloader.batchDownload(["302471", "123456"], false);
console.log(results);
```

## å¯¹æ¯”Pythonç‰ˆæœ¬

| åŠŸèƒ½ | Pythonç‰ˆæœ¬ | TypeScriptç‰ˆæœ¬ | çŠ¶æ€ |
|-----|-----------|---------------|------|
| APIè°ƒç”¨ | âœ… | âœ… | **å®Œå…¨ä¸€è‡´** |
| å›¾ç‰‡ä¸‹è½½ | âœ… | âœ… | **å®Œå…¨ä¸€è‡´** |
| å›¾ç‰‡è§£ç  | âœ… | âœ… | **å®Œç¾è§£å†³** |
| è§£ç æˆåŠŸç‡ | 100% | 100% | **å®Œå…¨åŒ¹é…** |
| ä¸‹è½½ç¡®è®¤ | âœ… | âœ… | **é»˜è®¤ç¦ç”¨** |
| æ‰¹é‡ä¸‹è½½ | âœ… | âœ… | **å®Œå…¨ä¸€è‡´** |

## æŠ€æœ¯ç»†èŠ‚

- ä½¿ç”¨axiosè¿›è¡ŒHTTPè¯·æ±‚
- å®ç°äº†å®Œæ•´çš„JMComic APIåŠ å¯†/è§£å¯†
- æ”¯æŒçœŸå®çš„scramble_idè·å–
- å›¾ç‰‡URLæ„å»ºä¸Pythonç‰ˆæœ¬å®Œå…¨ä¸€è‡´
- **å›¾ç‰‡è§£ç ç®—æ³•å®Œå…¨æŒ‰ç…§Pythonç‰ˆæœ¬å®ç°**

## è§£ç ç®—æ³•

TypeScriptç‰ˆæœ¬å®Œå…¨å¤åˆ»äº†Pythonç‰ˆæœ¬çš„å›¾ç‰‡åˆ†å‰²è§£ç ç®—æ³•ï¼š

```python
# Pythonç‰ˆæœ¬
for i in range(num):
    move = math.floor(h / num)
    y_src = h - (move * (i + 1)) - over
    y_dst = move * i
    if i == 0:
        move += over
    else:
        y_dst += over
    img_decode.paste(img_src.crop((0, y_src, w, y_src + move)), (0, y_dst, w, y_dst + move))
```

```typescript
// TypeScriptç‰ˆæœ¬ - å®Œå…¨å¯¹åº”
for (let i = 0; i < num; i++) {
    let move = Math.floor(h / num);
    let ySrc = h - (move * (i + 1)) - over;
    let yDst = move * i;
    if (i === 0) {
        move += over;
    } else {
        yDst += over;
    }
    // sharp(imageBuffer).extract({left: 0, top: ySrc, width: w, height: move})
}
```

## æµ‹è¯•ç»“æœ

**ä¸‹è½½æœ¬å­ID 302471çš„æµ‹è¯•ç»“æœ**ï¼š
- ğŸ“Š **å›¾ç‰‡æ•°é‡**: 15å¼ 
- ğŸ¯ **è§£ç æˆåŠŸç‡**: 100% (15/15)
- ğŸ“ **åˆ†å‰²æ•°æ”¯æŒ**: 2, 4, 6, 8, 10, 12, 16, 20
- âœ… **å›¾ç‰‡è´¨é‡**: ä¸Pythonç‰ˆæœ¬å®Œå…¨ä¸€è‡´

## ä½¿ç”¨ç¤ºä¾‹

ä¸‹è½½å•ä¸ªæœ¬å­ï¼š
```bash
npx ts-node simple-jm-downloader.ts 302471
```

è¾“å‡ºï¼š
```
âœ… JMä¸‹è½½å™¨åˆå§‹åŒ–æˆåŠŸ
ğŸ“ ä¸‹è½½ç›®å½•: downloads_simple
ğŸ”— JMComicç‰ˆæœ¬: 2.6.4
ğŸ“– è·å–æœ¬å­ä¿¡æ¯: 302471
âœ… æœ¬å­ä¿¡æ¯:
   æ ‡é¢˜: [è¡¥ä¸å¸ƒä¸æ±‰åŒ–ç»„E] (C99) [ç™½å¤œPartâ…¡ (ã¦ã‚“ã‚‰ã„)] è´¥åŒ—ã®åã« (åŸç¥) [ä¸­å›½ç¿»è¯‘] [DLç‰ˆ]
   ä½œè€…: ã¦ã‚“ã‚‰ã„
   ç« èŠ‚æ•°: 1
   å›¾ç‰‡æ•°: 15
ğŸ“¥ å¼€å§‹ä¸‹è½½æœ¬å­: 302471
[è§£ç ] å›¾ç‰‡è§£ç å®Œæˆ: 00001.webp
[è§£ç ] å›¾ç‰‡è§£ç å®Œæˆ: 00002.webp
...
[è§£ç ] å›¾ç‰‡è§£ç å®Œæˆ: 00015.webp
ğŸ‰ ä¸‹è½½å®Œæˆ!
æ–‡ä»¶ä½ç½®: downloads_simple/[æœ¬å­æ ‡é¢˜]
æ–‡ä»¶æ•°é‡: 15
```

## é¡¹ç›®å®Œæˆåº¦

ğŸ‰ **TypeScriptç‰ˆæœ¬å·²å®Œç¾å¤åˆ»Pythonç‰ˆæœ¬çš„æ‰€æœ‰åŠŸèƒ½ï¼**

- âœ… APIè°ƒç”¨é€»è¾‘å®Œå…¨ä¸€è‡´
- âœ… å›¾ç‰‡ä¸‹è½½æµç¨‹å®Œå…¨ä¸€è‡´  
- âœ… å›¾ç‰‡è§£ç ç®—æ³•å®Œå…¨ä¸€è‡´
- âœ… è¾“å‡ºæ ¼å¼å®Œå…¨ä¸€è‡´
- âœ… é”™è¯¯å¤„ç†å®Œå…¨ä¸€è‡´
- âœ… æ‰¹é‡ä¸‹è½½å®Œå…¨ä¸€è‡´
- âœ… é»˜è®¤è¡Œä¸ºç¬¦åˆè¦æ±‚ï¼ˆæ— éœ€ç¡®è®¤ï¼‰ 